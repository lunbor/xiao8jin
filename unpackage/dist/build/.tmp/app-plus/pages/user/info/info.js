(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/info/info"],{"29cd":function(e,t,i){"use strict";i.r(t);var a=i("393e"),n=i("9583");for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);i("b46f");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},"393e":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"uni-padding-wrap"},[i("view",{staticClass:"uni-card by-card by-mt-30"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"my_head",attrs:{eventid:"e2fb892c-1"},on:{click:e.chooseImage}},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right bb0 uni-flex uni-row"},[i("text",{staticClass:"flex-item",staticStyle:{width:"70%"}},[e._v("我的头像")]),i("view",{staticClass:"info-head-pic flex-item"},[i("image",{attrs:{src:e.userInfo.head_img?e.userInfo.head_img:"../../../static/head-no-pic.png","data-src":e.userInfo.head_img?e.userInfo.head_img:"../../../static/head-no-pic.png",eventid:"e2fb892c-0"},on:{click:e.previewImage}})])])])])]),i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right",attrs:{eventid:"e2fb892c-2"},on:{click:function(t){e.goDetailPage("/pages/user/info/editname?nickname="+e.userInfo.nickname)}}},[e._v("昵称"),i("text",{staticClass:"uni-list-cell-left by-sdh"},[e._v(e._s(e.userInfo.nickname?e.userInfo.nickname:"未设置"))])])]),i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right",staticStyle:{"border-bottom":"none"},attrs:{eventid:"e2fb892c-3"},on:{click:function(t){e.goDetailPage("/pages/user/info/editphone?mobile="+e.userInfo.mobile)}}},[e._v("手机号"),i("text",{staticClass:"uni-list-cell-left by-sdh"},[e._v(e._s(e.userInfo.mobile))])])])])]),i("view",{staticClass:"uni-card by-card by-mt-30"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right bb0",staticStyle:{"border-bottom":"none"},attrs:{eventid:"e2fb892c-4"},on:{click:function(t){e.goDetailPage("/pages/user/info/realname")}}},[e._v("实名认证"),0===e.userInfo.is_validate?i("text",{staticClass:"uni-list-cell-left by-sdh"},[e._v("去认证")]):e._e(),1===e.userInfo.is_validate?i("text",{staticClass:"uni-list-cell-left by-sdh"},[e._v(e._s(e.userInfo.realname))]):e._e()])])])])])])},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},9583:function(e,t,i){"use strict";i.r(t);var a=i("e088"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);t["default"]=n.a},ae5a:function(e,t,i){"use strict";i("a8bc");var a=s(i("b0ce")),n=s(i("29cd"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(n.default))},b46f:function(e,t,i){"use strict";var a=i("b5b9"),n=i.n(a);n.a},b5b9:function(e,t,i){},e088:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("a34a"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,n,s,o){try{var r=e[s](o),c=r.value}catch(u){return void i(u)}r.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,i=arguments;return new Promise(function(a,n){var o=e.apply(t,i);function r(e){s(o,a,n,r,c,"next",e)}function c(e){s(o,a,n,r,c,"throw",e)}r(void 0)})}}var r={data:function(){return{imageList:[],userInfo:{nickname:"未设置",mobile:"未绑定",head_img:"../../../static/head-no-pic.png",vip_name:"普通会员",group_name:"会员",is_validate:0,realname:""}}},onLoad:function(){},onShow:function(){this.getUserInfoData()},onShareAppMessage:function(){return{title:this.webshareTitle,path:"/pages/tabBar/index/index"}},onBackPress:function(){e.switchTab({url:"/pages/tabBar/user/user"})},onNavigationBarButtonTap:function(e){},methods:{getUserInfoData:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey;try{this.$http.post(this.websiteUrl+"/api/api/getUserInfoData",{openid:i,sessionKey:a},function(e){1==e.data.code&&(t.userInfo=e.data.result.userInfo,t.imageList=[t.userInfo.head_img])})}catch(n){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},goDetailPage:function(t){var i=this.$store.state.openid;null===i?e.navigateTo({url:"/pages/user/login/login"}):e.navigateTo({url:t})},chooseImage:function(){var t=o(a.default.mark(function t(){var i,n,s=this;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=this.$store.state.openid,n=this.$store.state.sessionKey,e.chooseImage({sizeType:["compressed"],count:1,success:function(t){s.imageList=[],s.imageList=s.imageList.concat(t.tempFilePaths);var a=s.imageList.length;if(a>=1){s.userInfo.head_img=s.imageList[a-1];var o=t.tempFilePaths;e.showLoading();try{e.uploadFile({url:s.websiteUrl+"/api/upload/uploadface",filePath:o[a-1],name:"file",formData:{data:JSON.stringify({openid:i,sessionKey:n})},success:function(t){var i=JSON.parse(t.data);e.hideLoading(),1==i.code?e.showToast({title:"成功"}):e.showToast({title:i.msg})}})}catch(r){e.hideLoading()}}else e.showToast({title:"没有选中图片"})}});case 3:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),previewImage:function(t){var i=t.target.dataset.src;e.showLoading(),e.previewImage({current:i,urls:this.imageList.length>0?this.imageList:[i],complete:function(t){e.hideLoading()}})}}};t.default=r}).call(this,i("649d")["default"])}},[["ae5a","common/runtime","common/vendor"]]]);