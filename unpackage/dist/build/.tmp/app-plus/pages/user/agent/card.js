(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/agent/card"],{2213:function(t,e,a){"use strict";a("a8bc");var i=s(a("b0ce")),n=s(a("cfdb"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},"300e":function(t,e,a){"use strict";var i=a("a5bb"),n=a.n(i);n.a},"33c3":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(a("82a7")),n=s(a("a4ce"));function s(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{bankCard:[],Loop:"",popType:"middle",tiptitle:"提示",showPopupMiddle:!1,tipcontent:"",is_validate:""}},onLoad:function(){},onShow:function(){this.getCardData()},onPullDownRefresh:function(){clearTimeout(this.Loop),this.getCardData(),t.stopPullDownRefresh()},onShareAppMessage:function(){return{title:this.webshareTitle,path:"/pages/tabBar/index/index"}},onNavigationBarButtonTap:function(e){var a=this.$store.state.openid;return null===a?(t.navigateTo({url:"/pages/user/login/login"}),!1):1!=this.is_validate?(t.showModal({title:"提示",content:"您还没有进行实名认证，是否立即前往认证？",success:function(e){e.confirm&&t.navigateTo({url:"/pages/user/info/realname"})}}),!1):void(0==this.current?this.onAddCredit():1==this.current&&t.navigateTo({url:"/pages/card/bank/add"}))},components:{uniSegmentedControl:i.default,uniPopup:n.default},methods:{hidePopup:function(){this.showPopupMiddle=!1,t.navigateTo({url:"/pages/card/credit/add"})},showMiddlePopup:function(){this.popType="middle",this.showPopupMiddle=!0},onAddCredit:function(){var e=this.$store.state.openid;return null===e?(t.navigateTo({url:"/pages/user/login/login"}),!1):1!=this.is_validate?(t.showModal({title:"提示",content:"您还没有进行实名认证，是否立即前往认证？",success:function(e){e.confirm&&t.navigateTo({url:"/pages/user/info/realname"})}}),!1):void(0==this.bankCard.length?t.showModal({content:"需要先绑定储蓄卡！",showCancel:!0,success:function(e){e.confirm&&t.navigateTo({url:"/pages/card/bank/add"})}}):0==this.creditCard.length?(this.tiptitle="绑卡须知",this.showMiddlePopup()):t.navigateTo({url:"/pages/card/credit/add"}))},goDetailPage:function(e){var a=this.$store.state.openid;return null==a?(t.navigateTo({url:"/pages/user/login/login"}),!1):1!=this.is_validate?(t.showModal({title:"提示",content:"您还没有进行实名认证，是否立即前往认证？",success:function(e){e.confirm&&t.navigateTo({url:"/pages/user/info/realname"})}}),!1):void t.navigateTo({url:e})},onClickItem:function(t){this.current!==t&&(this.current=t)},getCardData:function(){var e=this,a=this.$store.state.openid,i=this.$store.state.sessionKey;if(null!=a)try{this.$http.post(this.websiteUrl+"/api/api/getCardData",{openid:a,sessionKey:i},function(a){1==a.data.code?(e.bankCard=a.data.result.bankCard,e.creditCard=a.data.result.creditCard,e.is_validate=a.data.result.is_validate,e.tipcontent=a.data.result.article.content.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"')):t.showModal({content:a.data.msg,showCancel:!1})})}catch(n){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},delCredit:function(e){clearTimeout(this.Loop);var a=this;this.Loop=setTimeout(function(){t.showModal({content:"是否删除该信用卡？",confirmText:"确定",cancelText:"取消",success:function(i){if(i.confirm){clearTimeout(a.Loop);var n=a.$store.state.openid,s=a.$store.state.sessionKey;try{a.$http.post(a.websiteUrl+"/api/card/delCredit",{openid:n,sessionKey:s,credit_id:e},function(e){1==e.data.code?a.getCardData():t.showModal({content:e.data.msg,showCancel:!1})})}catch(i){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}}}})}.bind(this),2e3)},delCreditAct:function(t){},delBank:function(e){var a=this;t.showModal({content:"是否删除该储蓄卡？",confirmText:"确定",cancelText:"取消",success:function(i){if(i.confirm){var n=a.$store.state.openid,s=a.$store.state.sessionKey;try{a.$http.post(a.websiteUrl+"/api/card/delBank",{openid:n,sessionKey:s,bankcard_id:e},function(e){1==e.data.code?a.getCardData():t.showModal({content:e.data.msg,showCancel:!1})})}catch(i){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}}}})},cleartime:function(t){clearTimeout(this.Loop)},goTorepay:function(e){t.navigateTo({url:"/pages/card/credit/info?credit_id="+e})}}};e.default=o}).call(this,a("649d")["default"])},"3c14":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"content"},[i("view",{staticClass:"uni-padding-wrap",staticStyle:{width:"100%"}},[i("view",{staticClass:"card_addCase"},[i("view",{staticClass:"uni-flex uni-row"},[t._m(0),i("view",{staticClass:"flex-item",staticStyle:{width:"20%","padding-right":"30rpx"},attrs:{eventid:"675b353f-0"},on:{click:function(e){t.goDetailPage("/pages/card/bank/add")}}},[i("img",{staticClass:"card_icon",staticStyle:{float:"right"},attrs:{src:a("f130")}})])])]),i("view",{staticClass:"uni-padding-wrap",staticStyle:{"margin-top":"110rpx"}},[0==t.bankCard.length?i("view",{staticClass:"card-no-add"},[i("image",{attrs:{src:"../../../static/card-no-add.png"}}),i("view",{staticClass:"add_card"},[t._v("你现在什么都不绑定，一般情况下是不能还款的，"),i("br"),t._v("二般情况下你获得了大红包我们也不能咔嚓一下打到你的账户")],1),i("view",{staticClass:"add-card-btn uni-flex uni-row",staticStyle:{"justify-content":"center"},attrs:{eventid:"675b353f-1"},on:{click:function(e){t.goDetailPage("/pages/card/bank/add")}}},[i("view",{staticClass:"flex-item"}),i("view",{staticClass:"flex-item add-title"},[t._v("添加新的储蓄卡")])])]):t._e(),t._l(t.bankCard,function(e,a){return i("view",{key:a,staticClass:"uni-card card_style"},[i("view",{staticClass:"card_bank"},[i("text",[t._v(t._s(e.bank_name))]),i("text",{staticClass:"bank_type"},[t._v("储蓄卡")])]),i("view",{staticClass:"card_bank_info"},[i("view",{staticClass:"card_bank_main "},[i("view",{staticStyle:{"margin-bottom":"20rpx"}},[i("text",{staticClass:"name"},[t._v("持卡人：")]),t._v(t._s(e.name))]),i("view",{staticClass:"uni-flex uni-row"},[i("text",{staticClass:"name"},[t._v("卡号：")]),i("view",{staticClass:"text"},[t._v("***")]),i("view",{staticClass:"text"},[t._v("****")]),i("view",{staticClass:"text"},[t._v("****")]),i("view",{staticClass:"text lhg50"},[t._v(t._s(e.bank_code))])])]),i("view",{staticClass:"untying_btn",attrs:{eventid:"675b353f-2-"+a},on:{click:function(a){t.delBank(e.bankcard_id)}}},[i("text",[t._v("解除绑定")])])])])})],2)])]),i("uni-popup",{attrs:{show:t.showPopupMiddle,type:t.popType,title:t.tiptitle,queren:!0,quxiao:!1,eventid:"675b353f-3",mpcomid:"675b353f-1"},on:{hidePopup:t.hidePopup}},[i("view",{staticClass:"uni-common-mt uni-helllo-text uni-center",staticStyle:{"text-align":"left"}},[i("rich-text",{attrs:{nodes:t.tipcontent,mpcomid:"675b353f-0"}})],1)])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"flex-item",staticStyle:{width:"80%","padding-left":"30rpx"}},[i("img",{staticClass:"card_icon",attrs:{src:a("626d")}}),i("text",{staticClass:"card_name"},[t._v("储蓄卡管理")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},a5bb:function(t,e,a){},b0b3:function(t,e,a){"use strict";a.r(e);var i=a("33c3"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},cfdb:function(t,e,a){"use strict";a.r(e);var i=a("3c14"),n=a("b0b3");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("300e");var o=a("2877"),c=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports}},[["2213","common/runtime","common/vendor"]]]);