(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/set/getpass"],{"08cc":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",[e("view",{staticClass:"by-bg-title"},[t._v("验证码将发送至"+t._s(t.mobile))]),e("view",{staticClass:"uni-padding-wrap uni-common-pb"},[e("form",{attrs:{eventid:"3edf2a16-3"},on:{submit:t.formSubmit}},[e("view",{staticClass:"uni-card by-card"},[e("view",{staticClass:"uni-form-item uni-column"},[e("view",{staticClass:"with-fun by-login-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"uni-input",attrs:{type:"number",name:"smsCode",placeholder:"请填入验证码",eventid:"3edf2a16-0"},domProps:{value:t.smsCode},on:{input:function(s){s.target.composing||(t.smsCode=s.target.value)}}}),e("view",{staticClass:"text by-dj-btn",class:t.is_sms?"":"active",attrs:{eventid:"3edf2a16-1"},on:{click:t.sendSMS}},[t._v(t._s(t.fsbtn))])])]),e("view",{staticClass:"uni-form-item uni-column"},[e("view",{staticClass:"with-fun by-login-input"},[e("input",{staticClass:"uni-input",attrs:{placeholder:"请填写6~18位字符新密码",name:"password",password:t.showPassword}}),e("view",{staticClass:"uni-icon uni-icon-eye",class:[t.showPassword?"":"uni-active"],attrs:{eventid:"3edf2a16-2"},on:{click:t.changePassword}})])])]),e("view",{staticClass:"uni-btn-v"},[e("button",{staticClass:"modify_btn",attrs:{formType:"submit",loading:t.loading,type:"warn"}},[t._v("修改密码")])],1)])],1)])},n=[];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return n})},"0949":function(t,s,e){},"3ac9":function(t,s,e){"use strict";e.r(s);var i=e("efb7"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);s["default"]=n.a},"4f56":function(t,s,e){"use strict";var i=e("0949"),n=e.n(i);n.a},"6fbb":function(t,s,e){"use strict";e.r(s);var i=e("08cc"),n=e("3ac9");for(var o in n)"default"!==o&&function(t){e.d(s,t,function(){return n[t]})}(o);e("4f56");var a=e("2877"),u=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,null,null);s["default"]=u.exports},b186:function(t,s,e){"use strict";e("a8bc");var i=o(e("b0ce")),n=o(e("6fbb"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},efb7:function(t,s,e){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e={data:function(){return{mobile:"",showPassword:!0,loading:!1,tipcontent:"",is_sms:!0,Loop:"",downtime:60,verifyCode:"",smsCode:"",fsbtn:"发送验证码"}},onLoad:function(s){s.mobile?this.mobile=s.mobile:t.navigateTo({url:"/pages/user/set/set"})},onPullDownRefresh:function(){},onShareAppMessage:function(){return{title:this.webshareTitle,path:"/pages/tabBar/index/index"}},onNavigationBarButtonTap:function(t){},methods:{goDetailPage:function(s){t.navigateTo({url:s})},hidePopup:function(){this.showPopupMiddle=!1,this.showPopupTop=!1,this.showPopupBottom=!1},showMiddlePopup:function(){this.hidePopup(),this.popType="middle",this.showPopupMiddle=!0},changePassword:function(){this.showPassword=!this.showPassword},formSubmit:function(s){var e=this,i=s.detail.value.password,n=s.detail.value.smsCode,o=this.verifyCode;if(""===n)return t.showModal({content:"请填写验证码",showCancel:!1}),!1;if(""===o)return t.showModal({content:"请先获取验证码",showCancel:!1}),!1;if(""===i)return t.showModal({content:"请填写6~18位字符新密码",showCancel:!1}),!1;var a=this;try{var u=this.$store.state.openid,r=this.$store.state.sessionKey;this.$http.post(this.websiteUrl+"/api/api/uppassword",{openid:u,sessionKey:r,password:i,smsCode:n,verifyCode:o},function(s){1==s.data.code?t.showModal({content:s.data.msg,showCancel:!1,success:function(){e.$store.commit("logout"),t.reLaunch({url:"/pages/tabBar/user/user"})}}):t.showModal({content:s.data.msg,showCancel:!1,success:function(){a.loading=!1}})})}catch(s){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1,success:function(){a.loading=!1}})}},sendSMS:function(s){var e=this;if(this.is_sms){this.is_sms=!1;var i=this.$store.state.openid,n=this.$store.state.sessionKey,o=1,a=1;try{this.$http.post(this.websiteUrl+"/api/api/sendSMS",{openid:i,sessionKey:n,is_user:o,getPass:a},function(s){1==s.data.code?(e.downtime=60,e.dateDown(),e.verifyCode=s.data.result):(t.showModal({content:s.data.msg,showCancel:!1}),e.is_sms=!0)})}catch(s){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1}),this.is_sms=!0}}},dateDown:function(){var t=this;this.fsbtn="重新发送("+this.downtime+")",this.Loop=setInterval(function(){if(0==t.downtime)return t.fsbtn="发送验证码",t.is_sms=!0,void clearInterval(t.Loop);t.downtime--,t.fsbtn="重新发送("+this.downtime+")"}.bind(this),1e3),this.is_sms&&clearInterval(this.Loop)}},components:{}};s.default=e}).call(this,e("649d")["default"])}},[["b186","common/runtime","common/vendor"]]]);