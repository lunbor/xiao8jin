(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/pos/posStep"],{"0675":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"pos_bg"},[i("view",{staticClass:"pos_yhze_text"},[e._v("￥"),i("text",[e._v(e._s(e.money))])]),i("view",{staticClass:"pos_yhze"},[e._v("收款金额")])]),i("view",{staticClass:"uni-padding-wrap"},[i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate"},[e._m(0),i("view",{staticClass:"flex-item"},[e._v(e._s(e.bank_name))])])]),i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate bb0"},[e._m(1),i("view",{staticClass:"flex-item"},[e._v(e._s(e.aisle_name))])])])])]),i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right bb0"},[e._m(2),i("input",{directives:[{name:"model",rawName:"v-model",value:e.credit_name,expression:"credit_name"}],attrs:{disabled:"disabled",placeholder:"请选择付款账户",eventid:"0589d9c0-0"},domProps:{value:e.credit_name},on:{click:e.showBottomPopup,input:function(t){t.target.composing||(e.credit_name=t.target.value)}}})])])])]),i("view",{directives:[{name:"show",rawName:"v-show",value:""!=e.payFee,expression:"payFee!=''"}],staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"by-sdhrg red-text"},[e._v(e._s(e.payFee)),i("text")])])])])]),e.is_area?i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content p15 dzfont"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-input-row by-sdhp"},[i("label",[e._v("自选商户地区")]),i("switch",{attrs:{eventid:"0589d9c0-1"},on:{change:e.switch2Change}})],1)]),1==e.zx_area?i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right"},[e._m(3),i("input",{directives:[{name:"model",rawName:"v-model",value:e.province_name,expression:"province_name"}],staticClass:"uni-input",attrs:{disabled:"disabled",name:"province_name",placeholder:"请选择省份",eventid:"0589d9c0-2"},domProps:{value:e.province_name},on:{click:e.showSinglePicker,input:function(t){t.target.composing||(e.province_name=t.target.value)}}})])]):e._e(),1==e.zx_area?i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right bb0"},[e._m(4),i("input",{directives:[{name:"model",rawName:"v-model",value:e.city_name,expression:"city_name"}],staticClass:"uni-input",attrs:{disabled:"disabled",name:"city_name",placeholder:"请选择城市",eventid:"0589d9c0-3"},domProps:{value:e.city_name},on:{click:e.showSinglePickerCity,input:function(t){t.target.composing||(e.city_name=t.target.value)}}})])]):e._e()])]):e._e(),i("view",{staticClass:"uni-common-mt"},[i("button",{staticClass:"by-button-submit",attrs:{type:"warn",disabled:e.disabled,loading:e.loading,eventid:"0589d9c0-4"},on:{click:e.goPayMoney}},[e._v("立即支付")])],1),e._m(5)]),i("uni-popup",{attrs:{show:e.showPopupBottom,type:e.popType,title:"请选择支付卡",eventid:"0589d9c0-7",mpcomid:"0589d9c0-1"},on:{hidePopup:e.hidePopup}},[i("view",{staticClass:"uni-center"},[i("radio-group",{staticClass:"uni-list",attrs:{eventid:"0589d9c0-5",mpcomid:"0589d9c0-0"},on:{change:e.radioChange}},e._l(e.radioItems,function(t,a){return i("label",{key:a,staticClass:"uni-list-cell uni-list-cell-pd"},[i("view",[i("label",{staticClass:"label-2-text",attrs:{for:t.name}},[i("text",[e._v(e._s(t.value))])])],1),i("view",[i("radio",{attrs:{id:t.name,value:t.name,checked:t.checked}})],1)])})),i("view",{staticClass:"add-card-btn uni-flex uni-row",staticStyle:{"justify-content":"center"},attrs:{eventid:"0589d9c0-6"},on:{click:function(t){e.goDetailPage("/pages/card/credit/add")}}},[i("view",{staticClass:"flex-item uni-icon uni-icon-plusempty"}),i("view",{staticClass:"flex-item add-title"},[e._v("添加新的信用卡")])])],1)]),i("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray,eventid:"0589d9c0-8",mpcomid:"0589d9c0-2"},on:{onConfirm:e.onConfirm,onCancel:e.onCancel}}),i("mpvue-picker",{ref:"mpvuePickerF",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArrayF,eventid:"0589d9c0-9",mpcomid:"0589d9c0-3"},on:{onConfirm:e.onConfirmF,onCancel:e.onCancel}})],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("收款账户"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("支付通道"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("付款账户"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("省 份"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("城 市"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"uni-common-mt tip_btn"},[i("text",[e._v("*")]),e._v("一般即时到账，实际到账时间和到账金额以银行为准。")])}];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},"3e32":function(e,t,i){"use strict";i.r(t);var a=i("0675"),s=i("e756");for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);i("79ec");var o=i("2877"),c=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,null,null);t["default"]=c.exports},"79ec":function(e,t,i){"use strict";var a=i("a66a"),s=i.n(a);s.a},a66a:function(e,t,i){},c203:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("f818")),s=n(i("571a"));function n(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{money:"",bank_name:"",bankcard_id:"",aisle_name:"",block_id:"",credit_name:"",credit_id:"",loading:!1,disabled:!0,popType:"middle",showPopupBottom:!1,radioItems:[],payFee:"",vipPayFee:"",is_area:0,zx_area:0,themeColor:"#007AFF",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],pickerSingleArray:[],province:"",province_name:"",city:"",city_name:"",pickerValueArrayF:[],pickerSingleArrayF:[]}},onLoad:function(t){t.money>0?(this.money=t.money,this.bank_name=t.bank_name,this.bankcard_id=t.bankcard_id,this.aisle_name=t.aisle_name,this.block_id=t.block_id):e.switchTab({url:"/pages/tabBar/index/index"})},onShow:function(){this.getPosStepData()},onHide:function(){this.showPopupBottom&&(this.showPopupBottom=!1)},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvuePickerF.showPicker?(this.$refs.mpvuePickerF.pickerCancel(),!0):this.showPopupBottom?(this.showPopupBottom=!1,!0):void 0},onUnload:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvuePickerF.showPicker?(this.$refs.mpvuePickerF.pickerCancel(),!0):void(this.showPopupBottom&&(this.showPopupBottom=!1))},onShareAppMessage:function(){return{title:this.webshareTitle,path:"/pages/tabBar/index/index"}},methods:{showSinglePicker:function(){this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},showSinglePickerCity:function(){this.pickerValueArrayF=this.pickerSingleArrayF,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePickerF.show()},onConfirm:function(e){this.province=e.value[0],this.province_name=e.label,this.city="",this.city_name="",this.getCity(e.value[0])},onConfirmF:function(e){this.city=e.value[0],this.city_name=e.label},onCancel:function(e){console.log(e)},switch2Change:function(e){e.target.value?(this.province="",this.province_name="",this.city="",this.city_name="",this.getProvince(),this.zx_area=1):this.zx_area=0},getProvince:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.block_id;try{e.showLoading(),this.$http.post(this.websiteUrl+"/api/pay/getProvince",{openid:i,sessionKey:a,block_id:s},function(i){e.hideLoading(),1==i.data.code?t.pickerSingleArray=i.data.result:e.showModal({content:i.data.msg,showCancel:!1})})}catch(n){e.hideLoading(),e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},getCity:function(t){var i=this,a=this.$store.state.openid,s=this.$store.state.sessionKey,n=this.block_id;try{e.showLoading(),this.$http.post(this.websiteUrl+"/api/pay/getCity",{openid:a,sessionKey:s,province:t,block_id:n},function(t){e.hideLoading(),1==t.data.code?i.pickerSingleArrayF=t.data.result:e.showModal({content:t.data.msg,showCancel:!1})})}catch(o){e.hideLoading(),e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},goPayMoney:function(){var t=this.$store.state.openid,i=this.$store.state.sessionKey,a=this.money,s=this.bankcard_id,n=this.block_id,o=this.credit_id,c=this.province,r=this.city,l=this.zx_area;if(null!=t){var d=this;try{if(this.loading)return;this.loading=!0,this.$http.post(this.websiteUrl+"/api/pay/goPayMoney",{openid:t,sessionKey:i,money:a,bankcard_id:s,block_id:n,credit_id:o,province:c,city:r,zx_area:l},function(t){1==t.data.code?""!=t.data.result.url?(d.loading=!1,e.navigateTo({url:"/pages/card/web-view/web-view?url="+t.data.result.url})):e.showModal({content:t.data.msg,showCancel:!1,success:function(){d.loading=!1,e.switchTab({url:"/pages/tabBar/index/index"})}}):e.showModal({content:t.data.msg,showCancel:!1,success:function(){d.loading=!1}})})}catch(u){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1,success:function(){d.loading=!1}})}}},getPosStepData:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.money,n=this.bankcard_id,o=this.block_id;if(null!=i)try{this.$http.post(this.websiteUrl+"/api/pay/getPosStepData",{openid:i,sessionKey:a,money:s,bankcard_id:n,block_id:o},function(i){1==i.data.code?(t.radioItems=i.data.result.creditCard,t.is_area=i.data.result.is_area):e.showModal({content:i.data.msg,showCancel:!1})})}catch(c){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},getPosFee:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.money,n=this.bankcard_id,o=this.block_id,c=this.credit_id;if(null!=i)try{this.$http.post(this.websiteUrl+"/api/pay/getPosFee",{openid:i,sessionKey:a,money:s,bankcard_id:n,block_id:o,credit_id:c},function(i){1==i.data.code?(t.payFee=i.data.result.payFee,t.vipPayFee=i.data.result.vipPayFee,t.disabled=!1):(t.disabled=!0,e.showModal({content:i.data.msg,showCancel:!1}))})}catch(r){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},radioChange:function(e){for(var t=e.target.value,i={},a=0;a<this.radioItems.length;a++)-1!==t.indexOf(this.radioItems[a].name)?(i["radioItems["+a+"].checked"]=!0,this.credit_name=this.radioItems[a].value):i["radioItems["+a+"].checked"]=!1;this.credit_id=e.detail.value,this.showPopupBottom=!1,this.getPosFee()},hidePopup:function(){this.showPopupBottom=!1,this.showAisleBottom=!1},showBottomPopup:function(){this.hidePopup(),this.popType="bottom",this.showPopupBottom=!0},goDetailPage:function(t){var i=this.$store.state.openid;if(null==i)return e.navigateTo({url:"/pages/user/login/login"}),!1;e.navigateTo({url:t})}},components:{uniPopup:a.default,mpvuePicker:s.default,mpvuePickerF:s.default}};t.default=o}).call(this,i("649d")["default"])},e756:function(e,t,i){"use strict";i.r(t);var a=i("c203"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=s.a},eae0:function(e,t,i){"use strict";i("a8bc");var a=n(i("b0ce")),s=n(i("3e32"));function n(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(s.default))}},[["eae0","common/runtime","common/vendor"]]]);