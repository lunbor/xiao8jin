(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/card/credit/repayStep"],{"0b02":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=n(i("571a"));function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r=(a={components:{mpvuePicker:s.default,mpvuePickerF:s.default},data:function(){return{credit_id:"",temp_id:"",card:[],loading:!1,show:!0,repayTemp:[],bannerShow:!1,is_dz:0,dz_fee:0,zx_area:0,themeColor:"#007AFF",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],pickerSingleArray:[],province:"",province_name:"",city:"",city_name:"",pickerValueArrayF:[],pickerSingleArrayF:[]}},computed:{},onLoad:function(t){t.credit_id&&t.temp_id?(this.credit_id=t.credit_id,this.temp_id=t.temp_id):e.switchTab({url:"/pages/tabBar/card/card"})},onShow:function(){this.getRepayTemp()},onBackPress:function(){},methods:{showSinglePicker:function(){this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},showSinglePickerCity:function(){this.pickerValueArrayF=this.pickerSingleArrayF,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePickerF.show()},onConfirm:function(e){this.province=e.value[0],this.province_name=e.label,this.city="",this.city_name="",this.getCity(e.value[0])},onConfirmF:function(e){this.city=e.value[0],this.city_name=e.label},onCancel:function(e){console.log(e)},goDetailPage:function(t){e.navigateTo({url:t})},closeBanner:function(){this.bannerShow=!1},getTipZzj:function(){this.bannerShow=!0},switch2Change:function(e){e.target.value?(this.province="",this.province_name="",this.city="",this.city_name="",this.getProvince(),this.zx_area=1):this.zx_area=0},getProvince:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.repayTemp.current;try{e.showLoading(),this.$http.post(this.websiteUrl+"/api/repay/getProvince",{openid:i,sessionKey:a,current:s},function(i){e.hideLoading(),1==i.data.code?t.pickerSingleArray=i.data.result:e.showModal({content:i.data.msg,showCancel:!1})})}catch(n){e.hideLoading(),e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},getCity:function(t){var i=this,a=this.$store.state.openid,s=this.$store.state.sessionKey,n=this.repayTemp.current;try{e.showLoading(),this.$http.post(this.websiteUrl+"/api/repay/getCity",{openid:a,sessionKey:s,province:t,current:n},function(t){e.hideLoading(),1==t.data.code?i.pickerSingleArrayF=t.data.result:e.showModal({content:t.data.msg,showCancel:!1})})}catch(c){e.hideLoading(),e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},submitRepayStep:function(){var t=this.$store.state.openid,i=this.$store.state.sessionKey,a=this.temp_id,s=this.credit_id,n=this.is_dz,c=this,r=this.province,l=this.city,o=this.zx_area;try{if(this.loading)return;this.loading=!0,this.$http.post(this.websiteUrl+"/api/repay/submitRepayStep",{openid:t,sessionKey:i,temp_id:a,credit_id:s,is_dz:n,province:r,city:l,zx_area:o},function(t){1==t.data.code?""!=t.data.result.url?(c.loading=!1,e.navigateTo({url:"/pages/card/web-view/web-view?url="+t.data.result.url})):e.showModal({content:t.data.msg,showCancel:!1,success:function(){c.loading=!1,e.navigateTo({url:"/pages/card/credit/repayInfo?credit_id="+c.credit_id})}}):e.showModal({content:t.data.msg,showCancel:!1,success:function(){c.loading=!1}})})}catch(u){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1,success:function(){c.loading=!1}})}},getRepayTemp:function(){var t=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.credit_id,n=this.temp_id;try{this.$http.post(this.websiteUrl+"/api/repay/getRepayTemp",{openid:i,sessionKey:a,credit_id:s,temp_id:n},function(i){1==i.data.code?(t.card=i.data.result.creditCard,t.repayTemp=i.data.result.repayTemp.temp_body,1==i.data.result.repayTemp.temp_body.current&&(t.is_dz=1),t.dz_fee=i.data.result.dz_fee):e.showModal({content:i.data.msg,showCancel:!1})})}catch(c){e.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}},trigerCollapse:function(){this.show=!this.show}}},c(a,"onBackPress",function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvuePickerF.showPicker?(this.$refs.mpvuePickerF.pickerCancel(),!0):this.show?(this.show=!1,!0):void 0}),c(a,"onUnload",function(){this.$refs.mpvuePicker.showPicker&&this.$refs.mpvuePicker.pickerCancel(),this.$refs.mpvuePickerF.showPicker&&this.$refs.mpvuePickerF.pickerCancel()}),a);t.default=r}).call(this,i("649d")["default"])},"24ab":function(e,t,i){"use strict";i.r(t);var a=i("38ae"),s=i("6af8");for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);i("df68");var c=i("2877"),r=Object(c["a"])(s["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},"38ae":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"uni-card uni-card-red md15",style:{background:e.card.color}},[i("view",{staticClass:"uni-triplex-row pd15"},[i("view",{staticClass:"uni-triplex-left lf7"},[e._v(e._s(e.card.bank_name)),i("text",[e._v(e._s(e.card.credit_code))]),i("button",{staticClass:"mini-btn",attrs:{type:"primary",size:"mini"}},[e._v("信用卡")])],1)]),i("view",{staticClass:"uni-triplex-row linebg"}),i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[e._v("¥"),i("text",[e._v(e._s(e.card.line_credit))])]),i("view",[e._v("额度")])]),i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[i("text",[e._v(e._s(e.card.bill_time))]),e._v("日")]),i("view",[e._v("账单日")])]),i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[i("text",[e._v(e._s(e.card.repay_time))]),e._v("日")]),i("view",[e._v("还款日")])])])]),i("view",{staticClass:"uni-padding-wrap"},[i("view",{staticClass:"uni-card by-card"},[2==e.repayTemp.current?i("view",{staticClass:"uni-card-content p15"},e._l(e.repayTemp.list,function(t,a){return i("view",{key:a,staticClass:"list-item"},[i("view",{staticClass:"uni-flex uni-row justify"},[i("view",{staticClass:"text left-text"},[2==t.type?i("view",{staticClass:"text log-title"},[e._v("还款")]):1==t.type?i("view",{staticClass:"text log-title"},[e._v("消费")]):e._e(),i("view",{staticClass:"text log-time"},[e._v(e._s(t.chtime))])]),i("view",{staticClass:"text right-text"},[i("view",{staticClass:"text log-money"},[e._v("¥"+e._s(t.money/100))]),1==t.type?i("view",{staticClass:"text log-balance"},[""!=t.mcc_p_name?i("text",[e._v("行业："+e._s(t.mcc_p_name))]):e._e()]):e._e()])])])})):e._e(),2!=e.repayTemp.current?i("view",{staticClass:"uni-card-content p15"},[i("view",{staticClass:"repay_title"},[e._v("还款金额：¥"),i("text",[e._v(e._s(e.repayTemp.total/100))])]),i("view",{staticClass:"uni-timeline",staticStyle:{padding:"30rpx 20rpx","background-color":"#fff"}},e._l(e.repayTemp.list,function(t,a){return 2==t.type?i("view",{key:a,staticClass:"uni-timeline-item",class:1==a?"uni-timeline-first-item":a==e.repayTemp.list.length-1?"uni-timeline-last-item":""},[i("view",{staticClass:"uni-timeline-item-keynode"},[e._v(e._s(t.chtime))]),i("view",{staticClass:"uni-timeline-item-divider"}),i("view",{staticClass:"uni-timeline-item-content"},[i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"text list-money"},[e._v("¥"),i("text",[e._v(e._s(t.money/100))])]),2==t.type?i("view",{staticClass:"text list-type"},[e._v("还款")]):1==t.type?i("view",{staticClass:"text list-type"},[e._v("消费")]):e._e()])])]):e._e()}))]):e._e()]),i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content p15"},[i("view",{staticClass:"uni-list-cell uni-collapse"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-bottom repay-mx",class:e.show?"uni-active":""},[i("view",{staticClass:"text"},[i("view",{staticClass:"uni-icon uni-icon-help-filled help-filled",attrs:{eventid:"bd4c092a-0"},on:{click:function(t){e.getTipZzj()}}}),e._v("预留金："),1==e.repayTemp.current?i("text",[e._v("¥"+e._s((e.repayTemp.minMoney-e.repayTemp.maxExpen)/100))]):i("text",[e._v("¥"+e._s(e.repayTemp.minMoney/100))])]),i("view",{staticClass:"uni-list-cell-left",attrs:{eventid:"bd4c092a-1"},on:{click:function(t){e.trigerCollapse()}}},[e._v("明细")])]),i("view",{staticClass:"uni-collapse-content",class:e.show?"uni-active margin10":""},[i("view",{staticClass:"uni-flex uni-row repay-fee",staticStyle:{"justify-content":"space-between"}},[i("view",{staticClass:"text uni-list-cell-left"},[e._v("还款金额")]),i("view",{staticClass:"text uni-list-cell-left"},[e._v("¥"+e._s(e.repayTemp.total/100))])]),i("view",{staticClass:"uni-flex uni-row repay-fee",staticStyle:{"justify-content":"space-between"}},[i("view",{staticClass:"text uni-list-cell-left"},[e._v("还款手续费")]),i("view",{staticClass:"text uni-list-cell-left"},[e._v("¥"+e._s(e.repayTemp.sMoney/100))])]),i("view",{staticClass:"uni-flex uni-row repay-fee",staticStyle:{"justify-content":"space-between"}},[i("view",{staticClass:"text uni-list-cell-left"},[e._v("还款次数费")]),i("view",{staticClass:"text uni-list-cell-left"},[e._v("¥"+e._s(e.repayTemp.payNum))])])])])])]),1==e.repayTemp.current?i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content p15 dzfont"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-input-row"},[i("label",[e._v("提供垫资本金")]),i("text",[e._v("¥"+e._s(e.repayTemp.maxExpen/100))])],1)])])]):e._e(),i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content p15 dzfont"},[i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-input-row by-sdhp"},[i("label",[e._v("自选商户地区")]),i("switch",{attrs:{eventid:"bd4c092a-2"},on:{change:e.switch2Change}})],1)]),1==e.zx_area?i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right"},[e._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:e.province_name,expression:"province_name"}],staticClass:"uni-input",attrs:{disabled:"disabled",name:"province_name",placeholder:"请选择省份",eventid:"bd4c092a-3"},domProps:{value:e.province_name},on:{click:e.showSinglePicker,input:function(t){t.target.composing||(e.province_name=t.target.value)}}})])]):e._e(),1==e.zx_area?i("view",{staticClass:"hg50"},[i("view",{staticClass:"uni-list-cell-navigate uni-navigate-right bb0"},[e._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.city_name,expression:"city_name"}],staticClass:"uni-input",attrs:{disabled:"disabled",name:"city_name",placeholder:"请选择城市",eventid:"bd4c092a-4"},domProps:{value:e.city_name},on:{click:e.showSinglePickerCity,input:function(t){t.target.composing||(e.city_name=t.target.value)}}})])]):e._e()])])]),i("view",{staticClass:"uni-common-mt uni-padding-wrap uni-common-mb"},[i("button",{staticClass:"by-button-submit",attrs:{type:"warn",loading:e.loading,eventid:"bd4c092a-5"},on:{click:e.submitRepayStep}},[e._v("提交计划")])],1),e.bannerShow?i("view",{staticClass:"uni-banner"},[e._m(2),i("view",{staticClass:"tip_cancel",attrs:{eventid:"bd4c092a-6"},on:{tap:e.closeBanner}},[i("image",{attrs:{src:"../../../static/wk_tip_cancel.png"}})])]):e._e(),e.bannerShow?i("view",{staticClass:"uni-mask"}):e._e(),i("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray,eventid:"bd4c092a-7",mpcomid:"bd4c092a-0"},on:{onConfirm:e.onConfirm,onCancel:e.onCancel}}),i("mpvue-picker",{ref:"mpvuePickerF",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArrayF,eventid:"bd4c092a-8",mpcomid:"bd4c092a-1"},on:{onConfirm:e.onConfirmF,onCancel:e.onCancel}})],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("省 份"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"by-sdh"},[e._v("城 市"),i("text")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content pd15"},[i("view",{staticClass:"tip_btn"},[i("text",[e._v("*")]),e._v("预留金:信用卡需要预留的额度;")]),i("view",{staticClass:"tip_btn"},[i("text",[e._v("*")]),e._v("平台收取的手续费=还款手续费+还款次数费;")]),i("view",{staticClass:"tip_btn"},[i("text",[e._v("*")]),e._v("若中途还款失败，平台只收取已经交易成功部分的手续费;")]),i("view",{staticClass:"tip_btn"},[i("text",[e._v("*")]),e._v("信用卡额度不足预留金金额，会导致还款计划失败;")])])])])}];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},"6af8":function(e,t,i){"use strict";i.r(t);var a=i("0b02"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=s.a},ae9e:function(e,t,i){},bf67:function(e,t,i){"use strict";i("a8bc");var a=n(i("b0ce")),s=n(i("24ab"));function n(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(s.default))},df68:function(e,t,i){"use strict";var a=i("ae9e"),s=i.n(a);s.a}},[["bf67","common/runtime","common/vendor"]]]);