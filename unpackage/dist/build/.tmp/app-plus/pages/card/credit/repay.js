(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/card/credit/repay"],{"0075":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"uni-numbox"},[i("view",{staticClass:"uni-numbox-minus",class:{"uni-numbox-disabled":t.disableSubtract},attrs:{eventid:"0ba95d6e-0"},on:{click:function(e){t._calcValue("subtract")}}},[t._v("-")]),i("input",{staticClass:"uni-numbox-value",attrs:{type:"number",disabled:t.disabled,value:t.inputValue,eventid:"0ba95d6e-1"},on:{blur:t._onBlur}}),i("view",{staticClass:"uni-numbox-plus",class:{"uni-numbox-disabled":t.disableAdd},attrs:{eventid:"0ba95d6e-2"},on:{click:function(e){t._calcValue("add")}}},[t._v("+")])])},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},"21be":function(t,e,i){"use strict";var a=i("464e"),s=i.n(a);s.a},"21ed":function(t,e,i){"use strict";i.r(e);var a=i("2599"),s=i("786f");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("21be");var c=i("2877"),l=Object(c["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=l.exports},2599:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"uni-padding-wrap"},[i("view",{staticClass:"uni-card card_style"},[i("view",{staticClass:"card_bank"},[i("text",[t._v(t._s(t.card.bank_name))]),i("text",{staticClass:"card_num"},[t._v(t._s(t.card.credit_code))]),i("text",{staticClass:"bank_type"},[t._v("信用卡")])]),i("view",{staticClass:"uni-flex uni-row card_main"},[i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[t._v("¥"),i("text",[t._v(t._s(t.card.line_credit))])]),i("view",{staticClass:"name"},[t._v("额度")])]),i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[i("text",[t._v(t._s(t.card.bill_time))]),t._v("日")]),i("view",{staticClass:"name"},[t._v("账单日")])]),i("view",{staticClass:"flex-item ls3"},[i("view",{staticClass:"ls3-row"},[i("text",[t._v(t._s(t.card.repay_time))]),t._v("日")]),i("view",{staticClass:"name"},[t._v("还款日")])])])])]),i("view",[i("uni-segmented-control",{attrs:{current:t.current,values:t.items,styleType:t.styleType,activeColor:t.activeColor,eventid:"6d66d002-0",mpcomid:"6d66d002-0"},on:{clickItem:t.onClickItem}})],1),0===t.current?i("view",{staticClass:"content s_case"},[i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-form-item  uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("还款金额")]),i("view",{staticClass:"title flex-item",staticStyle:{width:"70%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.repay_money,expression:"repay_money"}],staticClass:"uni-input ",staticStyle:{"font-weight":"600",color:"#333"},attrs:{type:"digit","placeholder-style":"font-weight: normal; color:#d0d0d7;",placeholder:"请输入要还款的金额,不低于1000元",eventid:"6d66d002-1"},domProps:{value:t.repay_money},on:{input:function(e){e.target.composing||(t.repay_money=e.target.value)}}})])])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-form-item  uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("费率")]),i("view",{staticClass:"flex-item",staticStyle:{width:"70%"}},[t._v(t._s(t.card.rate)+"% + 代付费:"+t._s(t.card.dfee)+"元/笔")])])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"uni-form-item  uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("还款开始日期")]),i("picker",{staticClass:"flex-item",staticStyle:{width:"70%"},attrs:{mode:"date",value:t.start_time,start:t.startDate,end:t.endDate,eventid:"6d66d002-2"},on:{change:t.bindDateChange}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.start_time))])])],1)])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"uni-form-item uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("还款结束日期")]),i("picker",{staticClass:"flex-item",staticStyle:{width:"70%"},attrs:{mode:"date",value:t.end_time,start:t.startDate,end:t.endDate,eventid:"6d66d002-3"},on:{change:t.bindDateChange_end}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.end_time))])])],1)])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-row"},[t._m(0),i("view",{staticClass:"text",staticStyle:{flex:"1",padding:"8rpx 0rpx 20rpx"}},[i("text",{staticClass:"repay_num",class:1==t.repay_num?"active":"",attrs:{eventid:"6d66d002-4"},on:{click:function(e){t.onClickNum(1)}}},[t._v("1")]),i("text",{staticClass:"repay_num",class:2==t.repay_num?"active":"",attrs:{eventid:"6d66d002-5"},on:{click:function(e){t.onClickNum(2)}}},[t._v("2")]),i("text",{staticClass:"repay_num",class:3==t.repay_num?"active":"",attrs:{eventid:"6d66d002-6"},on:{click:function(e){t.onClickNum(3)}}},[t._v("3")])])])])]):t._e(),1===t.current?i("view",{staticClass:"content s_case"},[i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-input-row"},[i("label",[t._v("周期消费笔数")]),i("uni-number-box",{attrs:{min:1,max:50,value:t.pay_num,eventid:"6d66d002-7",mpcomid:"6d66d002-1"},on:{change:t.onNumberChange}})],1)]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-input-row"},[i("label",[t._v("周期数"),i("view",{staticClass:"uni-icon uni-icon-help-filled help-filled",attrs:{eventid:"6d66d002-8"},on:{click:function(e){t.getTipZzj()}}})]),i("uni-number-box",{attrs:{min:1,max:10,value:t.period_num,eventid:"6d66d002-9",mpcomid:"6d66d002-2"},on:{change:t.onNumberChange2}})],1)]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-input-row"},[i("label",[t._v("每笔最大消费金额")]),i("uni-number-box",{attrs:{min:200,max:1e3,step:100,value:t.pay_money,eventid:"6d66d002-10",mpcomid:"6d66d002-3"},on:{change:t.onNumberChange3}})],1)]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-form-item  uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("费率")]),i("view",{staticClass:"flex-item",staticStyle:{width:"70%"}},[t._v(t._s(t.card.jyk_rate)+"% + 代付费:"+t._s(t.card.jyk_dfee)+"元/笔")])])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"uni-form-item  uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("还款开始日期")]),i("picker",{staticClass:"flex-item",staticStyle:{width:"70%"},attrs:{mode:"date",value:t.start_time,start:t.startDate,end:t.endDate,eventid:"6d66d002-11"},on:{change:t.bindDateChange}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.start_time))])])],1)])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-flex uni-row"},[i("view",{staticClass:"uni-form-item uni-flex uni-row"},[i("view",{staticClass:"title flex-item",staticStyle:{width:"30%"}},[t._v("还款结束日期")]),i("picker",{staticClass:"flex-item",staticStyle:{width:"70%"},attrs:{mode:"date",value:t.end_time,start:t.startDate,end:t.endDate,eventid:"6d66d002-12"},on:{change:t.bindDateChange_end}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.end_time))])])],1)])]),i("view",{staticClass:"repay-list"},[i("view",{staticClass:"uni-input-row"},[i("label",[t._v("是否日期中自选")]),i("switch",{attrs:{eventid:"6d66d002-13"},on:{change:t.switch1Change}})],1),i("view",{directives:[{name:"show",rawName:"v-show",value:t.pay_date_show,expression:"pay_date_show"}],staticClass:"pd10"},t._l(t.pay_date,function(e,a){return i("text",{key:a,staticClass:"pay_date",class:e.checked?"active":"",attrs:{eventid:"6d66d002-14-"+a},on:{click:function(e){t.onClickPayDay(a)}}},[t._v(t._s(e.day))])}))])]):t._e(),i("view",{staticClass:"uni-common-mt uni-padding-wrap uni-common-mb"},[i("button",{staticClass:"by-button-submit",attrs:{type:"warn",loading:t.loading,eventid:"6d66d002-15"},on:{click:t.getRepayStep}},[t._v("下一步")])],1),t.bannerShow?i("view",{staticClass:"uni-banner"},[t._m(1),i("view",{staticClass:"tip_cancel",attrs:{eventid:"6d66d002-16"},on:{tap:t.closeBanner}},[i("image",{attrs:{src:"../../../static/wk_tip_cancel.png"}})])]):t._e(),t.bannerShow?i("view",{staticClass:"uni-mask"}):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"text",staticStyle:{flex:"1",padding:"8rpx 0rpx 8rpx 0"}},[i("view",{staticClass:"title"},[t._v("请选择每天还款次数"),i("span",{staticClass:"tip-text-h"},[t._v("(推荐每天1~2次)")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"uni-card by-card"},[i("view",{staticClass:"uni-card-content pd15"},[i("view",{staticClass:"tip_btn"},[i("text",[t._v("*")]),t._v("周期消费笔数:一个周期内消费的笔数;")]),i("view",{staticClass:"tip_btn"},[i("text",[t._v("*")]),t._v("周期数:一个周期执行完消费笔数后进行还款，继续循环执行下次周期;")]),i("view",{staticClass:"tip_btn"},[i("text",[t._v("*")]),t._v("例如周期消费笔数10笔，周期数3次; 计划将消费10笔后进行一次还款，还款后继续消费10笔，以此类推；形成10（消费）+1（还款）+10（消费）+1（还款）+10（消费）+1（还款）模式")])])])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},2841:function(t,e,i){"use strict";var a=i("5cc0"),s=i.n(a);s.a},"464e":function(t,e,i){},"5cc0":function(t,e,i){},"69a8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"uni-number-box",props:{value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.value<=this.min},disableAdd:function(){return this.value>=this.max}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("change",t)}},methods:{_calcValue:function(t){var e=this._getDecimalScale(),i=this.inputValue*e,a=this.step*e;"subtract"===t?i-=a:"add"===t&&(i+=a),i<this.min||i>this.max||(this.inputValue=i/e)},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e?(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e):this.inputValue=0}}};e.default=a},"786f":function(t,e,i){"use strict";i.r(e);var a=i("e93e"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a},"7f46":function(t,e,i){"use strict";i("a8bc");var a=n(i("b0ce")),s=n(i("21ed"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},e00a:function(t,e,i){"use strict";i.r(e);var a=i("0075"),s=i("ff3f");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("2841");var c=i("2877"),l=Object(c["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=l.exports},e93e:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("139e")),s=n(i("e00a"));function n(t){return t&&t.__esModule?t:{default:t}}var c={components:{uniSegmentedControl:a.default,uniNumberBox:s.default},data:function(){var t=this.getDate({format:!0});return{items:["本金还款","精养卡"],current:0,activeColor:"#5a91fe",styleType:"text",credit_id:"",card:[],loading:!1,start_time:t,end_time:t,repay_num:1,repay_money:"",pay_num:10,period_num:1,pay_money:500,bannerShow:!1,pay_date_show:!1,pay_date:[]}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(e){e.credit_id?this.credit_id=e.credit_id:t.switchTab({url:"/pages/tabBar/card/card"})},onShow:function(){this.getCreditCardInfo()},onBackPress:function(){},methods:{onNumberChange:function(t){this.pay_num=t},onNumberChange2:function(t){this.period_num=t},onNumberChange3:function(t){this.pay_money=t},closeBanner:function(){this.bannerShow=!1},getTipZzj:function(){this.bannerShow=!0},getRepayStep:function(){var e=this.$store.state.openid,i=this.$store.state.sessionKey,a=this.repay_money,s=this.current,n=this.credit_id,c=this.repay_num,l=this.start_time,r=this.end_time,u=this.pay_money,o=this.pay_num,d=this.period_num,v=this.pay_date;if(2==s){if(""==u)return void t.showModal({content:"请输入每笔最大消费金额",showCancel:!1});if(l.replace(/-/g,"")>r.replace(/-/g,""))return void t.showModal({content:"结束日期不能大于开始日期",showCancel:!1})}else{if(""==a)return void t.showModal({content:"请输入还款金额",showCancel:!1});if(l.replace(/-/g,"")>r.replace(/-/g,""))return void t.showModal({content:"还款结束日期不能大于还款开始日期",showCancel:!1})}var m=this;try{if(this.loading)return;this.loading=!0,this.$http.post(this.websiteUrl+"/api/repay/getRepayStep",{openid:e,sessionKey:i,repay_money:a,current:s,credit_id:n,repay_num:c,start_time:l,end_time:r,pay_money:u,period_num:d,pay_num:o,pay_date:v},function(e){1==e.data.code?(m.loading=!1,t.navigateTo({url:"/pages/card/credit/repayStep?credit_id="+n+"&temp_id="+e.data.result})):t.showModal({content:e.data.msg,showCancel:!1,success:function(){m.loading=!1}})})}catch(_){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1,success:function(){m.loading=!1}})}},switch1Change:function(t){this.getDateAll(this.start_time,this.end_time),this.pay_date_show=t.target.value},onClickPayDay:function(t){var e=this.pay_date;e[t].checked?e[t].checked=!1:e[t].checked=!0,this.pay_date=e},onClickNum:function(t){this.repay_num=t},bindDateChange:function(t){this.start_time=t.target.value,this.getDateAll(this.start_time,this.end_time)},bindDateChange_end:function(t){this.end_time=t.target.value,this.getDateAll(this.start_time,this.end_time)},getDateAll:function(t,e){var i=t.split("-"),a=e.split("-"),s=new Date;s.setUTCFullYear(i[0],i[1]-1,i[2]);var n=new Date;n.setUTCFullYear(a[0],a[1]-1,a[2]);for(var c=s.getTime(),l=n.getTime(),r=[],u="",o=0,d=c;d<=l;)u=new Date(parseInt(d)),r[o]={value:this.getNewDate(u),checked:!0,day:u.getDate()},o+=1,d+=864e5;this.pay_date=r},getNewDate:function(t){var e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();return i=i>9?i:"0"+i,a=a>9?a:"0"+a,"".concat(e,"-").concat(i,"-").concat(a)},getDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,s=e.getDate();return"start"===t?i-=1:"end"===t&&(i+=2),a=a>9?a:"0"+a,s=s>9?s:"0"+s,"".concat(i,"-").concat(a,"-").concat(s)},onClickItem:function(t){this.current!==t&&(this.current=t)},getCreditCardInfo:function(){var e=this,i=this.$store.state.openid,a=this.$store.state.sessionKey,s=this.credit_id;try{this.$http.post(this.websiteUrl+"/api/card/getCreditCardInfo",{openid:i,sessionKey:a,credit_id:s},function(i){1==i.data.code?e.card=i.data.result:t.showModal({content:i.data.msg,showCancel:!1})})}catch(n){t.showModal({content:"网络异常,请稍后重试...",showCancel:!1})}}}};e.default=c}).call(this,i("649d")["default"])},ff3f:function(t,e,i){"use strict";i.r(e);var a=i("69a8"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a}},[["7f46","common/runtime","common/vendor"]]]);